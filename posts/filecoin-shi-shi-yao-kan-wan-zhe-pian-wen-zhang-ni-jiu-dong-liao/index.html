<!DOCTYPE html>
<html lang="en-us">
<head>
    
        
<meta charset="utf-8">
<meta name="HandheldFriendly" content="True">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer-when-downgrade">

<title>Filecoin 是什么，看完这篇文章你就懂了 - FILVIP</title>
<meta name="description" content="">

<link rel="icon" type="image/x-icon" href="/favicon.ico">
<link rel="apple-touch-icon-precomposed" href="/favicon.png">

<link rel="stylesheet" href="/css/style.css?rnd=1591947566" />

<link rel="stylesheet" href="/css/my.css?rnd=1591947566">

<meta property="og:title" content="Filecoin 是什么，看完这篇文章你就懂了" />
<meta property="og:description" content="昨天是 2019 年的情人节（2/14），没想到 Filecoin 在 Twitter 放出一条重磅消息，宣布已将开源,那么本篇文章就带着大家来尝鲜，看看 Filecoin 的基本用法。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/filecoin-shi-shi-yao-kan-wan-zhe-pian-wen-zhang-ni-jiu-dong-liao/" />
<meta property="og:image" content="/images/og-featured.png"/>
<meta property="article:published_time" content="2019-02-15T14:36:16+08:00" />
<meta property="article:modified_time" content="2019-02-15T14:36:16+08:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="/images/og-featured.png"/>

<meta name="twitter:title" content="Filecoin 是什么，看完这篇文章你就懂了"/>
<meta name="twitter:description" content="昨天是 2019 年的情人节（2/14），没想到 Filecoin 在 Twitter 放出一条重磅消息，宣布已将开源,那么本篇文章就带着大家来尝鲜，看看 Filecoin 的基本用法。"/>







    
</head>
<body>
    <a class="skip-main" href="#main">Skip to main content</a>
    <div class="container">
        <header> 
            
                <h1 class="site-header">
    <a href="/">FILVIP</a>
</h1>
<nav>
    
    
    <a class="" href="/tags/ipfs" title="IPFS">IPFS</a>
    
    <a class="" href="/tags/filecoin" title="FileCoin">FileCoin</a>
    
    <a class="" href="/posts/" title="Archive">Archive</a>
    
    <a class="" href="/about" title="About">About</a>
    
</nav>

            
        </header>
        <main id="main" tabindex="-1"> 
            

    <article class="post">
        <header>
            <h1 class="post-title">Filecoin 是什么，看完这篇文章你就懂了</h1>
        </header>
        <div class="content">
            <p>昨天是 2019 年的情人节（2/14），没想到 Filecoin 在 Twitter 放出一条重磅消息，宣布已将 <a href="https://github.com/filecoin-project/go-filecoin">Filecoin 项目</a>开源，提供测试网络，详细报道可以参考官方<a href="https://filecoin.io/blog/opening-filecoin-project-repos/">博文</a>。</p>
<p><img src="/images/filecoin/filecoin.png" alt="filecoin.png"></p>
<h3 id="什么是-filecoin">什么是 Filecoin?</h3>
<p>Filecoin 是一个去中心化的存储网络，能将海量用户的闲散存储资源充分利用起来，从而构建一套超低成本的可靠存储系统。</p>
<p>因为它没有中心，所以会用到区块链技术，只不过一般区块链使用的是算力挖矿的工作量证明（Proof-of-Work mining），而 Filecoin 使用的是存储工作量证明(Proof-of-Storage)。</p>
<h3 id="与-ipfs-的关系">与 IPFS 的关系</h3>
<p>在谈 Filecoin 之前想必大家对 IPFS 已经有过了解，那二者有什么关系呢？</p>
<p>简单来说，IPFS 主要负责 P2P 网络中的内容寻值和内容传输，而 Filecoin 是内容永久存储的激励层，它们之间是相互补充的关系。</p>
<blockquote>
<p>IPFS addresses and moves content; Filecoin is the missing incentive layer。</p>
</blockquote>
<h3 id="filecoin-架构">Filecoin 架构</h3>
<p>我们可以把 Filecoin 简化为两层，一个是区块链，主要是记录全网状态（一个去中心化的状态机），包括所有钱包账户和余额，市场订单匹配记录。另外一个是存储的解决方案，主要包括副本策略（纠删码，多副本），端到端加密，存储时间和续费策略，存储市场匹配等。</p>
<p>它主要包括 4 种角色：</p>
<ul>
<li>存储矿工（Storage miners）： 将自己的磁盘抵押出来，提供存储服务，类似云厂商的对象存储</li>
<li>检索矿工（Retrieval miners）：可以帮助用户快速的检索到内容，类似于传统意义的 CDN</li>
<li>存储客户端（Storage clients）：能够上传内容到 Filecoin，类似对象存储上传客户端</li>
<li>检索客户端（Retrieval clients）：能够从 Filecin 检索到内容，类似对象存储下载客户端</li>
</ul>
<h3 id="如何挖矿">如何挖矿？</h3>
<p>挖矿就是在 Filecoin 网络中获取虚拟货币（FIL），主要可以通过以下途径：</p>
<ul>
<li>成为存储矿工，在市场中通过报价的方式出租存储空间，当匹配成功，将获取相应报酬</li>
<li>成为检索矿工，帮助内容下载客户端下载内容</li>
<li>成为数据修复矿工，帮助修复丢失或损坏的数据</li>
</ul>
<p>目前版本主要实现的是存储矿工部分，其它以后会相继完成。</p>
<p>那如何成为存储矿工呢？</p>
<p>Step 1: 通过抵押资产创建存储矿工</p>
<p>例如： 创建一个矿工承诺10个扇区（目前每个256 MiB）和100 FIL作为抵押，消息气价格为0 FIL /unit，限制1000个气体单位。</p>
<pre><code>go-filecoin miner create 10 100 --price=0 --limit=1000 --peerid `go-filecoin id | jq -r '.ID'`
</code></pre><p>这一步可能需要较长时间，主要确认账户余额是否足够抵押，如果创建成功将返回矿工地址。</p>
<p>Step 2: 启动矿工</p>
<pre><code>go-filecoin mining start
</code></pre><p>Step 3: 创建存储订单请求</p>
<pre><code>// 获取存储矿工地址
export MINER_ADDR=`go-filecoin config mining.minerAddress | tr -d \&quot;` 

// 获取矿工拥有者（Filecoin 节点） 地址 
export MINER_OWNER_ADDR=`go-filecoin miner owner $MINER_ADDR`

// 创建一个报价请求，例如以0.000000001 FIL/字节/块的价格询问，对2880块有效，消息气价为0 FIL/unit，限制为1000气体单位
go-filecoin miner set-price --from=$MINER_OWNER_ADDR --miner=$MINER_ADDR --price=0 --limit=1000 0.000000001 2880 # output: CID of the ask

// 查询报价列表
go-filecoin client list-asks --enc=json | jq 
</code></pre><h3 id="如何存取数据">如何存取数据？</h3>
<p>想使用 Filecoin 来存储数据，必须保证节点钱包具有充足的余额（FIL），这个等以后上线主网后可以通过交易市场购买，目前测试网络可以通过 <a href="https://github.com/filecoin-project/go-filecoin/wiki/Getting-Started#get-fil-from-the-filecoin-faucet">faucet</a> 免费获取。</p>
<p>Step 1： 添加存储的内容到本地节点</p>
<p>这点很像 <code>ipfs add xx</code>， 例如：</p>
<pre><code>echo &quot;Hi my name is $USER&quot;&gt; hello.txt
export CID=`go-filecoin client import ./hello.txt`
go-filecoin client cat $CID
</code></pre><p>也可以通过文件导入：</p>
<pre><code>export CID=`go-filecoin client import ~/Desktop/sample-data-master/camel.jpg`
go-filecoin client cat $CID &gt; image.png &amp;&amp; open image.png
</code></pre><p>Step 2: 查询存储市场，获取报价</p>
<p>可以通过命令查询存储矿工的报价列表：</p>
<pre><code>go-filecoin client list-asks --enc=json | jq
</code></pre><p>结果类似：</p>
<pre><code>{
  &quot;Miner&quot;: &quot;fcqxvnl37zdv8clc26j6r43zn8md7tc2mrfx77vru&quot;,
  &quot;Price&quot;: &quot;2.5&quot;,
  &quot;Expiry&quot;: 588,
  &quot;ID&quot;: 0,
  &quot;Error&quot;: null
}
</code></pre><p>Step 3: 匹配报价</p>
<pre><code>go-filecoin client propose-storage-deal &lt;miner&gt; &lt;data&gt; &lt;ask&gt; &lt;duration&gt;
</code></pre><p>其中：</p>
<ul>
<li>miner: 通过 <code>go-filecoin client list-asks</code> 出来的矿工地址</li>
<li>data: 本地导入内容的 CID</li>
<li>ask:  通过 <code>go-filecoin client list-asks</code> 列出来的 ID（通常都为 0）
-duration: 希望存储的时间周期，30秒为一个blocks, 所有一天就是 (2 blocks/min * 60 min/hr * 24 hr/day) = 2880 blocks。</li>
</ul>
<p>Step 4: 矿工存储数据</p>
<p>当匹配订单(<code>propose-storage-deal</code>)创建成功后， 本地数据将自动通过 <a href="https://github.com/ipfs/specs/tree/master/bitswap">bitswap</a> 传输到矿工节点。</p>
<p>Step 5: 客户端检索数据</p>
<p>客户端可以通过提交查询订单和数据恢复操作来下载数据，例如：</p>
<pre><code>// 创建查询订单
go-filecoin client query-storage-deal &lt;dealID&gt;

// 当查询订单创建后，可以通过订单 minner 的地址以及想查询的内容 ID 来获取内容
go-filecoin retrieval-client retrieve-piece &lt;minerAddress&gt; &lt;CID&gt; # 可能需要1分钟
</code></pre><h3 id="现状">现状</h3>
<p>当前 Filecoin 还是较为早期阶段，部分功能还在开发中，而且存在一定<a href="https://github.com/filecoin-project/go-filecoin/blob/master/KNOWN_ISSUES.md">安全问题</a>。现在上线的是测试网络，主网预计 2019 Q3 上线。</p>
<p>核心功能进展：</p>
<ul>
<li>存储矿工： 基本完成</li>
<li>检索矿工： 待开发</li>
<li>数据修复矿工： 待开发</li>
<li>客户端加密： 待开发</li>
<li>纠删码存储： 待开发</li>
</ul>
<h3 id="思考和展望">思考和展望</h3>
<p>Filecoin 是完全去中心化的存储系统，优劣式明显。</p>
<p>劣势：</p>
<ul>
<li>去中心化方案，引入区块链，必然会带来性能的降低（QPS 较低，确认时间长），这决定了它不能像标准对象存储（3副本）那样提供高速的上传下载能力。</li>
<li>Filecoin 主要激励机制是靠虚拟货币，但它具有很大的价格波动性，而存储文件需要很长的时效性，币价的波动性会带来存储的不稳定性，矿工存储利益不平衡。</li>
</ul>
<p>解决办法：</p>
<ul>
<li>Filecoin 为我们提供了将无限闲置资源利用起来的可能性，这在未来数据大爆炸时代是很有用的。虽然它存在上诉说的性能问题，但它可以用作低频存储（冷数据）而且这部分的存储量是巨大的，只要它具有超级吸引力的价格，而在热数据方面我们可以考虑通过 IPFS 来做缓存（类似 CDN），从而形成闭环。</li>
<li>对于币价的不稳定性这点，可以通过快速变现的方式减少持有的货币，或者降低订单存储结算周期，按照每周付费。</li>
</ul>
<h3 id="结语">结语</h3>
<p>在 Filecoin 之前已经有不少去中心化的存储，比如（Sia, StorJ），但它们都没有真正流行起来，很大原因就是价格上没有绝对优势。</p>
<p>Filecoin 能否流行起来，需要时间来证明，不过就目前来看，Filecoin 绝对是去中心存储市场中最耀眼的那一个。</p>
<p>参考链接：</p>
<ul>
<li><a href="https://github.com/filecoin-project/go-filecoin/wiki/How-Filecoin-Works">How Filecoin Works</a></li>
<li><a href="https://github.com/filecoin-project/go-filecoin/wiki/Mining-Filecoin">Mining Filecoin</a></li>
<li><a href="https://github.com/filecoin-project/go-filecoin/wiki/Storing-on-Filecoin">Storing on Filecoin</a></li>
</ul>

        </div>
        

    


<div class="post-info">
    
        <div class="post-date">2019-02-15</div>
    
    <div class="post-taxonomies">
        
            
                <ul class="post-tags">
                    
                        <li><a href="/tags/filecoin">#filecoin</a></li>
                    
                </ul>
        
    </div>
</div>

    </article>

    

    


        </main>
        <footer>
            
                
                

                <p>© filstore.vip, 2020<br>
Powered by <a target="_blank" href="https://gohugo.io/">Hugo</a>, theme <a target="_blank" href="https://github.com/mitrichius/hugo-theme-anubis">Anubis</a>.
</p>
            
        </footer>
    </div>
</body>
</html>
